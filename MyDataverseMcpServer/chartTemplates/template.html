<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chart.js Bar Chart (CDN)</title>
  <style>
    :root { color-scheme: light dark; }
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    header {
      display: flex;
      align-items: center;
      background-color: white;
      padding: 1rem 2rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    header img {
      height: 60px;   /* bigger logo */
      margin-right: 1rem;
    }
    header h1 {
      font-size: 1.5rem;
      margin: 0;
      color: black;
    }
    .chart-wrap {
      position: relative;
      max-width: 780px;
      height: 400px;
      margin: 2rem auto;
      padding: 0 2rem;
    }
    canvas {
      display: block;
    }
    footer {
      text-align: center;
      font-size: 1.1rem;
      color: #FFFF;
      margin: 2rem 0;
    }
    #additionalContent {
      max-width: 780px;
      margin: 0 auto 2rem; /* center block and add bottom spacing */
      text-align: center;  /* center inline content */
      padding: 0 2rem;     /* horizontal padding similar to chart */
    }
  </style>
</head>
<body>
  <header>
    <img src="/dynamic/logo.png" alt="Logo" />
    <h1>[reportHeading]</h1>
  </header>

  <div class="chart-wrap">
    <canvas id="myChart" role="img"></canvas>
  </div>

  <div id="additionalContent">
    
  </div>

  <footer id="reportFooter"></footer>

  <!-- Chart.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    const ctx = document.getElementById('myChart');

    [ChartJsCode]  // should define a 'config' object

    // Ensure label, legend, and axis tick colors are bright white
    if (!window.config) window.config = {};
    config.options = config.options || {};
    config.options.responsive = true;
    config.options.maintainAspectRatio = false;

    // Set label/legend/tick colors to white for all chart types
    if (!config.options.plugins) config.options.plugins = {};
    config.options.plugins.legend = config.options.plugins.legend || {};
    config.options.plugins.legend.labels = config.options.plugins.legend.labels || {};
    config.options.plugins.legend.labels.color = '#FFFFFF';
    config.options.plugins.tooltip = config.options.plugins.tooltip || {};
    config.options.plugins.tooltip.bodyColor = '#FFFFFF';
    config.options.plugins.tooltip.titleColor = '#FFFFFF';
    if (config.options.scales) {
      for (const axis of Object.values(config.options.scales)) {
        axis.ticks = axis.ticks || {};
        axis.ticks.color = '#FFFFFF';
        if (axis.title) axis.title.color = '#FFFFFF';
      }
    }

    new Chart(ctx, config);

    // Add report generation timestamp
    const now = new Date();
    const formatted = now.toLocaleString(); // local date + time
    document.getElementById("reportFooter").textContent =
      "Report generated: " + formatted;
  </script>
</body>
</html>
